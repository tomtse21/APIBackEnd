{
  "version": 3,
  "sources": ["../../controllers/validation.ts"],
  "sourcesContent": ["import { Validator, ValidationError } from 'jsonschema';\nimport { RouterContext } from 'koa-router';\nimport { article } from '../schema/article.schema';\nimport { cat } from '../schema/cat.schema';\nimport { user } from '../schema/user.schema';\n\nconst v = new Validator()\n\nexport const validateArticle = async (ctx: RouterContext, next: any) => {\n  const validationOptions = {\n    throwError: true,\n    allowUnknownAttributes: false\n  }\n  const body = ctx.request.body;\n  try {\n    v.validate(body, article, validationOptions)\n    await next()\n  } catch (error) {\n    if (error instanceof ValidationError) {\n      ctx.body = error;\n      ctx.status = 400;\n    } else {\n      throw error;\n    }\n  }\n}\nexport const validateUser = async (ctx: RouterContext, next: any) => {\n  const validationOptions = {\n    throwError: true,\n    allowUnknownAttributes: false\n  }\n  const body = ctx.request.body;\n  try {\n    v.validate(body, user, validationOptions)\n    await next()\n  } catch (error) {\n    if (error instanceof ValidationError) {\n      ctx.body = error;\n      ctx.status = 400;\n    } else {\n      throw error;\n    }\n  }\n}\nexport const validateCat = async (ctx: RouterContext, next: any) => {\n  const validationOptions = {\n    throwError: true,\n    allowUnknownAttributes: false\n  }\n  const body = ctx.request.body;\n  try {\n    v.validate(body, cat, validationOptions)\n    await next()\n  } catch (error) {\n    if (error instanceof ValidationError) {\n      ctx.body = error;\n      ctx.status = 400;\n    } else {\n      throw error;\n    }\n  }\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAA2C;AAE3C,qBAAwB;AACxB,iBAAoB;AACpB,kBAAqB;AAErB,MAAM,IAAI,IAAI,4BAAU;AAEjB,MAAM,kBAAkB,OAAO,KAAoB,SAAc;AACtE,QAAM,oBAAoB;AAAA,IACxB,YAAY;AAAA,IACZ,wBAAwB;AAAA,EAC1B;AACA,QAAM,OAAO,IAAI,QAAQ;AACzB,MAAI;AACF,MAAE,SAAS,MAAM,wBAAS,iBAAiB;AAC3C,UAAM,KAAK;AAAA,EACb,SAAS,OAAP;AACA,QAAI,iBAAiB,mCAAiB;AACpC,UAAI,OAAO;AACX,UAAI,SAAS;AAAA,IACf,OAAO;AACL,YAAM;AAAA,IACR;AAAA,EACF;AACF;AACO,MAAM,eAAe,OAAO,KAAoB,SAAc;AACnE,QAAM,oBAAoB;AAAA,IACxB,YAAY;AAAA,IACZ,wBAAwB;AAAA,EAC1B;AACA,QAAM,OAAO,IAAI,QAAQ;AACzB,MAAI;AACF,MAAE,SAAS,MAAM,kBAAM,iBAAiB;AACxC,UAAM,KAAK;AAAA,EACb,SAAS,OAAP;AACA,QAAI,iBAAiB,mCAAiB;AACpC,UAAI,OAAO;AACX,UAAI,SAAS;AAAA,IACf,OAAO;AACL,YAAM;AAAA,IACR;AAAA,EACF;AACF;AACO,MAAM,cAAc,OAAO,KAAoB,SAAc;AAClE,QAAM,oBAAoB;AAAA,IACxB,YAAY;AAAA,IACZ,wBAAwB;AAAA,EAC1B;AACA,QAAM,OAAO,IAAI,QAAQ;AACzB,MAAI;AACF,MAAE,SAAS,MAAM,gBAAK,iBAAiB;AACvC,UAAM,KAAK;AAAA,EACb,SAAS,OAAP;AACA,QAAI,iBAAiB,mCAAiB;AACpC,UAAI,OAAO;AACX,UAAI,SAAS;AAAA,IACf,OAAO;AACL,YAAM;AAAA,IACR;AAAA,EACF;AACF;",
  "names": []
}
